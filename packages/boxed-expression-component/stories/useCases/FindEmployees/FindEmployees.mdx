import { Meta, Canvas } from "@storybook/blocks";
import { Employees, FindByEmployees, FindEmployeesByKnowledge } from "./FindEmployees.tsx";

<Meta title="Use cases/Find Employees" />

## Find Employees

This examples brings a employee finder by knowledge and department. The following DRD brings two input nodes "Knowledge"
and "Dept" (Department) that will be used for the search. It also contains two decision nodes, one with the employees
information, called "Employees", and "Find by Employees" responsible to invoke the function "Find employee by knowledge"
on the Business Knowledge Model node.

<p>
  <img src={"/find-employees-dmn.png"} alt="Find Employees DMN" title="Find Employees DMN" />
</p>

The following data types were used to enhance the DRG:

<p>
  <img src={"/find-employees-data-types.png"} alt="Find Employees Data Types" title="Find Employees Data Types" />
</p>

## Boxed expressions

The decision logic of the DRG were divided as follow:

### Employees

---

This decision node contains all Employees information. For this, it's used the
[Relation](/docs/boxed-expressions-relation--overview) expression, which enables
to create a column for each Employee property. The Employee contains Id, Name, Dept (Department) and the employee Knowledges.
The Knowledges is a List of Knowledge.

<Canvas style={{ border: "unset", boxShadow: "unset" }}>
  <Employees />
</Canvas>

### Find employee by knowledge

---

The Business Knowledge Model **Find emplyees by knowledge** contains a
[Boxed Function](/docs/boxed-expressions-function--overview) expression. This function has
receive three parameters: "employees", "knowledge" and "dept" and returns a list of employees that met the knowledge
and dept requirements.
The [Boxed Function](/docs/boxed-expressions-function--overview) has a nested
[Boxed Context](/docs/boxed-expressions-context--overview). The first context entry is responsible to filter the Employees list
by department and save the value as **Employees by**. The second context entry **Employees with Knowledge** checks
each employee if it has the required knowledge, for the ones that has the knowledge, they are returned, otherwise
is returned null. Finally, the Employees with Knowledge is filtered removing all null values.

<Canvas style={{ border: "unset", boxShadow: "unset" }}>
  <FindEmployeesByKnowledge />
</Canvas>

### Find by Employees

---

The **Find by Employees** decision invokes the **Find emplyees by knowledge** function using a
[Boxed Invocation](/docs/boxed-expressions-invocation--overview).
The "Knowledge" and "Dept" comes from input nodes, and "Employees" comes from the **Employees** decision node.

<Canvas style={{ border: "unset", boxShadow: "unset" }}>
  <FindByEmployees />
</Canvas>
